
Ingres II Functions
Introduction

These functions allow you to access Ingres II database servers.

    Note: If you already used PHP extensions to access other database servers, note that Ingres doesn't allow concurrent queries and/or transaction over one connection, thus you won't find any result or transaction handle in this extension. The result of a query must be treated before sending another query, and a transaction must be committed or rolled back before opening another transaction (which is automatically done when sending the first query).

Requirements

To compile PHP with Ingres support, you need the Ingres OpenAPI library and header files.
Installation

This » PECL extension is not bundled with PHP. Information for installing this PECL extension may be found in the manual chapter titled Installation of PECL extensions. Additional information such as new releases, downloads, source files, maintainer information, and a CHANGELOG, can be located here: » http://pecl.php.net/package/ingres.

In order to have these functions available, you must compile PHP with Ingres support by using the --with-ingres[=DIR] option, where DIR is the Ingres base directory, which defaults to /II/ingres. If the II_SYSTEM environment variable isn't correctly set you may have to use --with-ingres=DIR to specify your Ingres installation directory.

When using this extension with Apache, if Apache does not start and complains with "PHP Fatal error: Unable to start ingres_ii module in Unknown on line 0" then make sure the environment variable II_SYSTEM is correctly set. Adding "export II_SYSTEM="/home/ingres/II" in the script that starts Apache, just before launching httpd, should be fine.
Runtime Configuration

The behaviour of these functions is affected by settings in php.ini.

Ingres configuration options Name 	Default 	Changeable 	Changelog
ingres.allow_persistent 	"1" 	PHP_INI_SYSTEM 	Available since PHP 4.0.2. Removed in PHP 5.1.0.
ingres.max_persistent 	"-1" 	PHP_INI_SYSTEM 	Available since PHP 4.0.2. Removed in PHP 5.1.0.
ingres.max_links 	"-1" 	PHP_INI_SYSTEM 	Available since PHP 4.0.2. Removed in PHP 5.1.0.
ingres.default_database 	NULL 	PHP_INI_ALL 	Available since PHP 4.0.2. Removed in PHP 5.1.0.
ingres.default_user 	NULL 	PHP_INI_ALL 	Available since PHP 4.0.2. Removed in PHP 5.1.0.
ingres.default_password 	NULL 	PHP_INI_ALL 	Available since PHP 4.0.2. Removed in PHP 5.1.0.
ingres.report_db_warnings 	"1" 	PHP_INI_ALL 	Available since ingres 1.1.
ingres.cursor_mode 	"0" 	PHP_INI_ALL 	Available since ingres 1.1.
ingres.blob_segment_length 	"4096" 	PHP_INI_ALL 	Available since ingres 1.2.0.
ingres.trace_connect 	"0" 	PHP_INI_ALL 	Available since ingres 1.2.1.
ingres.timeout 	"-1" 	PHP_INI_ALL 	Available since ingres 1.4.0.
ingres.array_index_start 	"1" 	PHP_INI_ALL 	Available since ingres 1.4.0.
For further details and definitions of the PHP_INI_* constants, see the php.ini directives.
Resource Types

ingres_connect() and ingres_pconnect() return an Ingres II link identifier.
Predefined Constants

The constants below are defined by this extension, and will only be available when the extension has either been compiled into PHP or dynamically loaded at runtime.

INGRES_ASSOC (integer)
    Columns are returned into the array having the fieldname as the array index. 
INGRES_NUM (integer)
    Columns are returned into the array having a numerical index to the fields. This index starts with 1, the first field in the result. 
INGRES_BOTH (integer)
    Columns are returned into the array having both a numerical index and the fieldname as the array index. 
INGRES_EXT_VERSION (string)
    Specifies the version of the Ingres Extension. Available since version 1.2.0 of the PECL extension. 
INGRES_API_VERSION (integer)
    Specifies the version of Ingres OpenAPI the extension was built against. Available since version 1.2.0 of the PECL extension. 
INGRES_CURSOR_READONLY (integer)
    Specifies that Ingres cursors should be opened in 'readonly' mode. Available since version 1.2.0 of the PECL extension. 
INGRES_CURSOR_UPDATE (integer)
    Specifies that Ingres cursors should be opened 'for update'. Available since version 1.2.0 of the PECL extension. 
INGRES_DATE_MULTINATIONAL (integer)
    Equivalent to the II_DATE_FORMAT setting of MULTINATIONAL. Available since version 1.2.0 of the PECL extension. 
INGRES_DATE_MULTINATIONAL4 (integer)
    Equivalent to the II_DATE_FORMAT setting of MULTINATIONAL4. Available since version 1.2.0 of the PECL extension. 
INGRES_DATE_FINNISH (integer)
    Equivalent to the II_DATE_FORMAT setting of FINNISH. Available since version 1.2.0 of the PECL extension. 
INGRES_DATE_ISO (integer)
    Equivalent to the II_DATE_FORMAT setting of ISO. Available since version 1.2.0 of the PECL extension. 
INGRES_DATE_ISO4 (integer)
    Equivalent to the II_DATE_FORMAT setting of ISO4. Available since version 1.2.0 of the PECL extension. 
INGRES_DATE_GERMAN (integer)
    Equivalent to the II_DATE_FORMAT setting of GERMAN. Available since version 1.2.0 of the PECL extension. 
INGRES_DATE_MDY (integer)
    Equivalent to the II_DATE_FORMAT setting of MDY. Available since version 1.2.0 of the PECL extension. 
INGRES_DATE_DMY (integer)
    Equivalent to the II_DATE_FORMAT setting of DMY. Available since version 1.2.0 of the PECL extension. 
INGRES_DATE_YMD (integer)
    Equivalent to the II_DATE_FORMAT setting of YMD. Available since version 1.2.0 of the PECL extension. 
INGRES_MONEY_LEADING (integer)
    Specifies the currency character that should be placed at the start of a money value. Equivalent to setting II_MONEY_FORMAT to 'L:'. Available since version 1.2.0 of the PECL extension. 
INGRES_MONEY_TRAILING (integer)
    Specifies the currency character that should be placed at the end of a money value. Equivalent to setting II_MONEY_FORMAT to 'T:'. Available since version 1.2.0 of the PECL extension. 
INGRES_STRUCTURE_BTREE (integer)
    Specifies the default table or index structure to BTREE when used in combination with the table_structure or index_structure option when connecting. Available since version 1.4.0 of the PECL extension. 
INGRES_STRUCTURE_CBTREE (integer)
    Specifies the default table or index structure to COMPRESSED BTREE when used in combination with the table_structure or index_structure option when connecting. Available since version 1.4.0 of the PECL extension. 
INGRES_STRUCTURE_HASH (integer)
    Specifies the default table or index structure to HASH when used in combination with the table_structure or index_structure option when connecting. Available since version 1.4.0 of the PECL extension. 
INGRES_STRUCTURE_CHASH (integer)
    Specifies the default table or index structure to COMPRESSED HASH when used in combination with the table_structure or index_structure option when connecting. Available since version 1.4.0 of the PECL extension. 
INGRES_STRUCTURE_HEAP (integer)
    Specifies the default table structure to HEAP when used in combination with the table_structure option when connecting. Available since version 1.4.0 of the PECL extension. 
INGRES_STRUCTURE_CHEAP (integer)
    Specifies the default table structure to COMPRESSED HEAP when used in combination with the table_structure option when connecting. Available since version 1.4.0 of the PECL extension. 
INGRES_STRUCTURE_ISAM (integer)
    Specifies the default table or index structure to ISAM when used in combination with the table_structure or index_structure option when connecting. Available since version 1.4.0 of the PECL extension. 
INGRES_STRUCTURE_CISAM (integer)
    Specifies the default table or index structure to COMPRESSED ISAM when used in combination with the table_structure or index_structure option when connecting. Available since version 1.4.0 of the PECL extension. 

Examples

This simple example shows how to connect, execute a query, print resulting rows and disconnect from an Ingres database.

Example#1 Simple Ingres Example
<?php
// Connecting, selecting database
$link = ingres_connect('database', 'user', 'password')
    or die('Could not connect: ' . ingres_error($link));
echo 'Connected successfully';

// Select from a table that exists in all Ingres databases
$query = 'SELECT * FROM iirelation';
$returncode = ingres_query($query,$link) or die('Query failed: ' .
ingres_error($link));

// Print results in HTML
// relid - table name
// relowner - table owner
echo "<table>\n";
while ($iirelation = ingres_fetch_object(INGRES_BOTH, $link)) {
    echo "\t<tr>\n";
    echo "\t\t<td>" . $iirelation->relid . "</td>\n";
    echo "\t\t<td>" . $iirelation->relowner . "</td>\n";
    echo "\t</tr>\n";
}
echo "</table>\n";

// Commit transaction
ingres_commit($link);
// Closing connection
ingres_close($link);
?>
Table of Contents

    * ingres_autocommit — Switch autocommit on or off
    * ingres_close — Close an Ingres II database connection
    * ingres_commit — Commit a transaction
    * ingres_connect — Open a connection to an Ingres database
    * ingres_cursor — Gets a cursor name for a given link resource
    * ingres_errno — Gets the last ingres error number generated
    * ingres_error — Gets a meaningful error message for the last error generated
    * ingres_errsqlstate — Gets the last SQLSTATE error code generated
    * ingres_fetch_array — Fetch a row of result into an array
    * ingres_fetch_object — Fetch a row of result into an object
    * ingres_fetch_row — Fetch a row of result into an enumerated array
    * ingres_field_length — Get the length of a field
    * ingres_field_name — Get the name of a field in a query result
    * ingres_field_nullable — Test if a field is nullable
    * ingres_field_precision — Get the precision of a field
    * ingres_field_scale — Get the scale of a field
    * ingres_field_type — Get the type of a field in a query result
    * ingres_num_fields — Get the number of fields returned by the last query
    * ingres_num_rows — Get the number of rows affected or returned by the last query
    * ingres_pconnect — Open a persistent connection to an Ingres II database
    * ingres_query — Send a SQL query to Ingres II
    * ingres_rollback — Roll back a transaction


